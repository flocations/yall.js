/* yall.js v2.2.2 */
export default function(e){const t={intersectionObserverSupport:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in window,idleCallbackSupport:"requestIdleCallback"in window,eventsToBind:[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]]},r={lazyClass:"lazy",lazyBackgroundClass:"lazy-bg",lazyBackgroundLoaded:"lazy-bg-loaded",lazyLoadedClass:"loaded",throttleTime:200,idlyLoad:!1,idleLoadTimeout:100,threshold:200,observeChanges:!1,observeRootSelector:"body",mutationObserverOptions:{childList:!0,subtree:!0},...e},o=`img.${r.lazyClass},video.${r.lazyClass},iframe.${r.lazyClass},.${r.lazyBackgroundClass}`,a={timeout:r.idleLoadTimeout},s=e=>[].slice.call(e),l=e=>{if("IMG"===e.tagName){let t=e.parentNode;"PICTURE"===t.tagName&&s(t.querySelectorAll("source")).forEach(e=>i(e)),i(e)}"VIDEO"===e.tagName&&(s(e.querySelectorAll("source")).forEach(e=>i(e)),i(e),!0===e.autoplay&&e.load()),"IFRAME"===e.tagName&&i(e),e.classList.contains(r.lazyBackgroundClass)&&(e.classList.remove(r.lazyBackgroundClass),e.classList.add(r.lazyBackgroundLoaded))},i=e=>{null!==e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),null!==e.getAttribute("data-src")&&e.setAttribute("src",e.getAttribute("data-src")),null!==e.getAttribute("data-poster")&&e.setAttribute("poster",e.getAttribute("data-poster"))},n=e=>{if(null!==e.getAttribute("src")){var t=new Image;t.src=e.getAttribute("src"),t.onload=(()=>{e.classList.add(r.lazyLoadedClass)})}},d=()=>{let e=!1;!1===e&&c.length>0&&(e=!0,setTimeout(()=>{c.forEach(e=>{e.getBoundingClientRect().top<=window.innerHeight+r.threshold&&e.getBoundingClientRect().bottom>=-r.threshold&&"none"!==getComputedStyle(e).display&&(!0===r.idlyLoad&&!0===t.idleCallbackSupport?requestIdleCallback(()=>{l(e)},a):l(e),e.classList.remove(r.lazyClass),c=c.filter(t=>t!==e),n(e))}),e=!1,0===c.length&&!1===r.observeChanges&&t.eventsToBind.forEach(e=>e[0].removeEventListener(e[1],d))},r.throttleTime))};let c=s(document.querySelectorAll(o));if(!0===t.intersectionObserverSupport){var u=new IntersectionObserver((e,o)=>{e.forEach(e=>{if(!0===e.isIntersecting||e.intersectionRatio>0){let s=e.target;!0===r.idlyLoad&&!0===t.idleCallbackSupport?requestIdleCallback(()=>l(s),a):l(s),s.classList.remove(r.lazyClass),o.unobserve(s),c=c.filter(e=>e!==s),n(s)}})},{rootMargin:`${r.threshold}px 0%`});c.forEach(e=>u.observe(e))}else t.eventsToBind.forEach(e=>e[0].addEventListener(e[1],d)),d();!0===t.mutationObserverSupport&&!0===r.observeChanges&&new MutationObserver(e=>e.forEach(()=>{s(document.querySelectorAll(o)).forEach(e=>{-1===c.indexOf(e)&&(c.push(e),!0===t.intersectionObserverSupport?u.observe(e):d())})})).observe(document.querySelector(r.observeRootSelector),r.mutationObserverOptions)}
